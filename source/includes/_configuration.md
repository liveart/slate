# Configuration
LiveArt Configuration has 2 entry points:
- ```config/config.json``` - set of properties in JSON format; by default - static file, but often is generated by server-side to serve current needs;
- ```LA.config.js``` (_added 0.10.5_) - set of pure js objects with options. Usually requires one-time setup during integration, and designed for more deep customization by integrator.

## config.json
> Sample configuration

```json
{
    "productsList": {
        "url": "config/products.json"
    },
    "defaultProductId": "11",
    "fonts": {
        "url": "config/fonts.json"
    },
    "colors": {
        "url": "config/colors.json",
        "pantones_url": "config/pantones.json"
    },
    "graphicsList": {
        "url": "config/graphics.json"
    },
    "social": {
        "url": "config/social.json"
    },
    "options": {
        "deleteOnDoubleClick": false,
        "includeProductInDesign": true,
        "includePrintingAreaInDesign": true,
        "includeMaskInDesign": true,
        "fontsCSSUrl": "fonts/fonts.css",
        "zoomEnabled": true,
        "minZoom": 50,
        "maxZoom": 150,
        "checkeredBackground": true,
        "unit": "in",
        "unit2": "ft",
        "unitConversionMult": 12,
        "showProductSelector": true,
        "checkTextFXThrottle": 400,
        "minDPU": 300,
        "showUploadedColorsDialog": true,
        "fitProductImage" : true,
        "fitEditableArea": true,
        "enableSnapGuides": true,
        "showSuitableProductColorize": true
    },
    "textEffects": {
        "config": "config/textEffects.json"
        
    },
    "defaultNameObjectText": "NAMES HERE",
    "defaultNumberObjectText": "00",
    "assetsUrl": "assets/",
    "galleryBaseUrl": "",
    "getQuoteUrl": "services/getQuote.php",
    "getDesignsUrl": "services/getDesigns.php?email=${email}",
    "saveDesignUrl": "services/saveDesign.php",
    "loadDesignUrl": "services/loadDesign.php?design_id=${design_id}",
    "redirectUrl": "services/order.php?design_id=${design_id}",
    "uploadImageUrl": "services/uploadImage.php",
    "shareLinkUrl": "index.html?design_id=${design_id}",
    "saveTemplateUrl": "services/saveTemplate.php",
    "getTemplatesUrl": "services/getTemplates.php?product_id=${product_id}",
    "redirectWindow": "parent"
}
```

LiveArt JS uses JSON format for its main configuration file and data configuration files for resources such as products and gallery images. The primary configuration file contains all the necessary options, as well as REST-like endpoints for server-side integration.

<aside class="notice">
While the LiveArt loads configuration by default out of static JSON files, you can generate all of the below automatically. For example, for product list you might want to export it from the database of your shop. In case of static files, you can indicate a path instead of URL.
</aside>

### Properties description
Property | Description | Type
-------- | ----------- | ----
productsList | indicates a URL returning a Product JSON structure | URL
defaultProductId | id of a product should be loaded upon start of LiveArt. | string, optional
defaultProductSize | _deprecated in v0.10.24_<br/> Highly recommended to use [```laOptions.defaultProductAttributes.sizeUnits```](#default-prod-attr-size)<br/>if default product is resizable, this attribute sets default size (Note: has lower priority to ```product.locations.editableAreaUnits```) in units, set by configuration. | array of numbers, optional
fonts | indicates a URL returning Fonts JSON structure | URL 
colors | indicates a URL returning Colors JSON structure. These are the colors for fonts and colorizable artwork | URL
colors.pantones_url | _added in v0.10.4_<br/>Colors JSON with Pantones. Available for fonts and colorizable artwork, and in color picker appears in separate tab. To disable this feature — remove the field.<br/>Note: for colorizing ```multicolor``` products refer to Product List configuration | URL
graphicsList | indicates a URL returning Gallery JSON structure. | URL
social | indicates a URL returning social networks configuration for uploading photos<br>_Added to v0.10.10_ | URL
options | contains the list of options which control visual appearance and behaviour of the designer area. See detailed description below. | object
textEffects | location for text effects configuration file and URL to service to obtain image of the text effect with certain parameters. See Data Structures section for details on using the text effects. To disable text effects completely, leave both fields empty. | URL
defaultNameObjectText, defaultNumberObjectText | a default text/number text, rendered in placeholder for Names or Numbers list respectively. | string
assetsUrl | relative or absolute URL to the assets folder. Assets folder contains necessary css, images and javascript libraries that make LiveArt HTML5 component work. | URL
galleryBaseUrl | an absolute URL to the folder where artwork gallery is located. This could be useful if you'd like the gallery to reside on different server or folder rather than default one. | URL
getQuoteUrl | a link to a backend service which gets a record with a current design and returns the information about pricing, such as a price per item, discount amount, total price and so on in JSON format. | URL
getDesignsUrl | a link to a backend service which returns the list of saved designs in JSON format. | URL
saveDesignUrl | a link to a backend service which gets the description of design in JSON format, saves it and returns its unique identifier, url, etc. | URL
loadDesignUrl | a link to a backend service which returns a single design using its unique identifier. | URL
redirectUrl | a link to a backend service which places order and redirects user to some another page, for example, shopping cart. | URL
uploadImageUrl | a link to a backend service which uploads user image from local file or URL. After uploading process image is shown on preview area and ready to be moved or resized. Allowed file extensions: *.jpg, *.png, *.gif, *.svg. | URL
shareLinkUrl | this parameter defines the template of the shared link url. Sharing a design calls a saveDesign service that should return an identifier under which design was saved. This id will be replaced in ${design_id} token and presented to user that may copy it and load the design later. | URL
saveTemplateUrl | _added in v0.10.27_<br/> a link to a backend service which gets the description of template design in JSON format, saves it and returns its unique identifier, url, etc. Used only in "Admin Mode". | URL
getTemplatesUrl | _added in v0.10.27_<br/> a link to a backend service which returns the list of available templates (global OR if setuped - for current product only) in JSON format. All templates are preparing in "Admin Mode". | URL
redirectWindow | window target whne redirecting to ```redirectUrl```. Used for LiveArt inside the iframe. Possible values: ""(default), "parent", or "top" (same logic as links inside iframe) | string

### Options Description
Property | Description | Default
-------- | ----------- | ------
deleteOnDoubleClick | boolean value which defines whether user can remove any object from working area by simple double-click or double tap (for mobile devices). | false
includeProductInDesign | boolean value which defines whether product background image is included into output mockup of the design.<br/>**Warning**: recomended value - ```true```, othervise image will be hidden (```display="none"```), but some software (e.g. ImageMagic) will ignore this fact.<br/> Alternate way — remove manually node with ```id="productImage"``` | false
includePrintingAreaInDesign | boolean value which defines whether constraints of area available for printing are included in output mockup of design. | false
includeMaskInDesign | boolean value which defines whether product locations mask are included in output mockup of design.<br/>**Warning**: recomended value - ```true```, othervise image will be hidden (```display="none"```), but some software (e.g. ImageMagic) will ignore this fact.<br/> Alternate way — remove manually node with ```id="productMask"``` | false
fontsCSSUrl | URL to the location of fonts CSS definitions that will be available for the user. In default package URL — ```"/fonts/fonts.css"``` Used for stand-alone SVG preview (for proper text fonts rendering in browser)| ""
zoomEnabled | boolean value, defines whether zoom tool will be enabled inside designer.
minZoom, maxZoom, zoomStep (optional) | numeric values, defining min, max, and step values for the zoom control respectively, in percents. | 50, 150, 10
checkeredBackground | If enabled, shows checkered background where no product background is rendered. The asset for background is located in ```assets/img/bg-fill.png``` | true
unit, unit2, unitConversionMult | _deprecated(not recommended to use, overrided by defaultUnit/secondaryUnit) in v0.10.30_<br/> units, shown for custom sizes products. Possible values are ```"in"```, ```"ft"```, and ```12``` or ```"cm"```, ```"m"```, and ```10``` and so on. Use ```unitConversionMult``` to indicate respective multiplier for proper conversion of ```unit``` to ```unit2```. | "", "", 10
defaultUnit ```optional``` | _added in v0.10.30_<br/> units, shown for custom sizes products. Possible values are ```in```, ```ft```, ```cm```, ```mm```, ```m```. All calculations and requests will be in selected units, if not specified in ```px```. Read more on <a href="https://liveart.uservoice.com/knowledgebase/articles/1836322-how-to-configure-units">How to configure units?</a> |
secondaryUnit ```optional``` | _added in v0.10.30_<br/> possible second units, show only if defaultUnit are set. Possible values are similar to defaultUnit. Read more on <a href="https://liveart.uservoice.com/knowledgebase/articles/1836322-how-to-configure-units">How to configure units?</a> | 
showProductSelector | possible values: ```true```/```false```. Defines whether Select Product form is shown. If ```false```, make sure you indicate the ```defaultProductId``` to preload the product. | true
checkTextFXThrottle | type: milliseconds. A delay in events for typing text, before LiveArt will trigger the server script to obtain new image for certain raster effect. | 400
minDPU | Set this property to show warning message if user will size raster image more than safe dimensions to meet suggested print quality standarts. Also this feature requires `editableArea` and `editableAreaUnits` (see Product Location Object) for each product location to use this feature (for correct unit/pixel ratio). Warning message is configured in html ('*#dpu-exceeded-popup*'). If user ignores such warning and continues design editing - on Place Order will be fired additional pop-up. Also may be re-defined for certain products (see Product Object). | 0
showUploadedColorsDialog | Defines whether to show after image upload pop-up with colors choises for uploaded image (default palette and 'Process Colors' checkbox). If value == `false` uploaded images are treated as 'Process Colors' | true
fitProductImage | If `true` — product images are fitted and centered in the canvas. Small product images are only centered.<br>Note: also please take into account  _fitEditableArea_ property.<br>_Added to v0.10.5_ | false
fitEditableArea | If `true` —  process *product.location.editableArea* and *product.location.clipRect* in coordinate system of product image<br>Before _v0.10.27_: Editable Area coordinates were always binded to canvas dimensions (not product image).<br>_Added to v0.10.27_ | false
enableSnapGuides | If `true` — enabling snapping objects while dragging to another objects, editable area center or sides. Also helps to set object's rotation angle to 0°, 90°, 180°, and 270°<br>_Added to v0.10.17_  | true
showSuitableProductColorize | If `true` — show only actual Current Locations colorizable areas.<br> (e.g. on "Back" location - show only colors from this location)<br>If `false` — on each location show all colorizable areas list. Works only with multicolor product<br>_Added to v0.10.25_ | false

## LA.config.js

> Sample configuration

```js
liveArt.init(document.getElementById('canvas-container'), 
    configFile, 
    controlsUpdateHandler, 
    laOptions);
```

### Default init values
Main purpose of this file - initialization of LiveArt with parameters:

Property | Description | Required
-------- | ----------- | --------
canvas | ```HTMLElement``` as placeholder for designer canvases.<br/>Strongly recommended to use default value | true 
configFile | ```string``` URL of config.json; usually depends on backend/admin area configuration  | true
controlsUpdateHandler | js ```function``` for API callbacks to UI.<br/>Strongly recommended to use default value | true
laOptions | ```object``` with default init parameters.<br/>See more info below | false

> Sample configuration

```js
var laOptions = {
    dimensions: [587, 543]
};

laOptions.adminMode = true;
laOptions.defaultDesignId = "design_id_1";
laOptions.defaultProductId = "product_id_1";
laOptions.defaultGraphicId = "graphics_id_1";

laOptions.defaultProductAttributes = {};
laOptions.defaultProductAttributes.sizeUnits = [5, 4];
laOptions.defaultProductAttributes.quantities = [ {size: "XL", quantity: 10} ];
laOptions.defaultProductAttributes.selectedUnit = "in";

laOptions.placeOrderHandler = null;
laOptions.translation = laTranslation.dictionary;
```

### ```laOptions``` attributes :
All attributes are optional and provided with their default values

Property | Type | Description
-------- | ---- | -----------
dimensions | ```array``` of 2 numbers | default canvas dimensions: ```[width, height]```<br/>Default values: ```[587, 543]```<br/>See ```/setup/README.txt``` in package for information how to change default canvas dimension
adminMode | ```boolean``` | Enable "Admin Mode" for preparing templates (both global and product-based)
defaultDesignId | ```string``` | Default design to be loaded; usually parsed from GET var
defaultProductId | ```string``` | Default product ID to be loaded; usually parsed from GET var<br/>Note: recommended to use this value instead of ```config.defaultProductId```
defaultGraphicId | ```string``` | Default graphics ID to be added after load; usually parsed from GET var
<a name="default-prod-attr-size"></a>defaultProductAttributes<br/>.sizeUnits | ```array``` of 2 numbers | default dimensions for resizable products (e.g. Sign 5"x4"). <br>_Added to v0.10.25_ <br> _Updated in v0.10.30_ Set in the ```selectedUnit``` or in default unit if not set upped ```selectedUnit```
defaultProductAttributes<br/>.quantities | ```array``` of ```object```s | Set default quantities for Order;<br>Higher priority over ```product.minQuantity```;<br>Syntax:<ol><li>```[{quantity: 30}]``` - default quantity (total for products without sizes OR for first size)</li><li>```[{size: "S", quantity: 5}, {size: "XL", quantity: 12}]``` - default quantities for product with sizes list</li></ol><br>_Added to v0.10.5_
defaultProductAttributes<br/>.selectedUnit | ```string``` | Set default units for resizable products. <br> Possible values: ```in```, ```ft```, ```mm```, ```cm```, ```m```<br> Default unit set by options.defaultUnit from [config.json](/#config-json) <br> Usually parsed from GET var(e.g. ```?pa_selected_unit=ft```)<br>_Added to v0.10.30_
placeOrderHandler | ```function``` | optional for overriding default Place Order process function.<br/>Default value: ```null```<br/>Syntax: ```function (ordered_design_id: string) { /*custom code here*/ }```;<br/>Default behavior: Redirect to ```config.redirectUrl``` using ```config.redirectWindow```;
translation | ```object``` |  optional translation dictionary; by default - English. See more at <a href="https://liveart.uservoice.com/knowledgebase/articles/917133">How to add translations to LiveArt</a><br>_Added to v0.10.5_

All options named ```defaultNNN``` (e.g. ```defaultProductId```, ```defaultProductAttributes```, etc.) could be also obtained from GET vars (easiest setup) via build-in helper ```function getQueryParam(param, type)```.<br/>

Notes:

* objects/arrays (e.g. ```defaultProductAttributes```) should be stringified and URL-encoded
    * ```?product_id=41&pa_size_units=%5B30%2C40%5D``` instead of ```?product_id=41&pa_size_units=[30,40]```
* browsers may have URI limits (e.g. <a href="https://stackoverflow.com/questions/417142/what-is-the-maximum-length-of-a-url-in-different-browsers ">2k chars limit in most browsers</a>), ensure you not exceeding it